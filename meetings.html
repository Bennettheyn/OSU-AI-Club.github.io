<html>
    <head>
        <link rel="stylesheet" href="styles/main.css">
        <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    </head>
    <body>
        <header>
            <div class="logo-content-box">
                <div class="logo" align="center">
                    <a href="index.html">
                        <img src="resources/AI_Logo_Final_Black.png"/>
                    </a>
                    <div class="motto">
                        The latest talks and<br />
                        events in AI.
                    </div>
                    <div class="subscribe-line">
                        Join the mailing list: <a href="https://Go.osu.edu/aiclub" class="subscribe">
                        Subscribe
                        </a>
                    </div>
                </div>
            </div>
            <div class="nav" align="center">
                <div class="nav-button">
                    <a href="index.html">
                        About Us
                    </a>
                </div>
                <div class="nav-button">
                    <a href="meetings.html">
                        Meetings
                    </a>
                </div>
                <div class="nav-button">
                    <a href="resources.html">
                        Resources
                    </a>
                </div>
            </div>
        </header>
        <div class="content">
            <div class="content-box">
                <script>
                    function httpGetAsync(theUrl, callback)
                    {
                        var xmlHttp = new XMLHttpRequest();
                        xmlHttp.onreadystatechange = function() { 
                            if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                                callback(xmlHttp.responseText);
                        }
                        xmlHttp.open("GET", theUrl, true); // true for asynchronous 
                        xmlHttp.send(null);
                    }
                    
                    function addMeeting(data)
                    {
                        var title = data["title"];
                        var date = data["date"];
                        var guest = data["guest"];
                        var desc = data["description"];
                        
                        var meetingTable = document.getElementsByClassName("meeting-list")[0];
                        
                        var entry = '<tr class="meeting"><td>';
                        entry += '<h3>' + title + '</h3>';
                        entry += '<div class="meeting-date"> <i class="fas fa-calendar-alt"></i> ' + date + ' </div>';
                        if (typeof guest != 'undefined')
                            entry += '<div class="meeting-guest"> <i class="fas fa-user"></i> ' + guest + ' </div>';
                        if (typeof desc != 'undefined')
                            entry += '<div class="meeting-desc"> <i class="fas fa-book-open"></i> ' + desc + ' </div>';
                        entry += '</td></tr>';
                        
                        meetingTable.innerHTML += entry;
                    }
                    
                    function updateMeetingTable(data)
                    {
                        console.log(data);
                        
                        var meetings = JSON.parse(data)["meetings"];
                        
                        meetings.forEach(function(meeting) {
                            addMeeting(meeting);
                        });
                    }
                    
                    httpGetAsync("resources/meetings.json", updateMeetingTable);
                </script>
                
                <table class="meeting-list">
                    
                </table>
            </div>
        </div>
        <footer>
            <div align="center">
                AI Club is an OSU Student Organization.<br />
                See <a href="/index.html">About Us</a> for more information.
            </div>
        </footer>
    </body>
</html>